(function(){var e={5358:function(e,t,s){var a={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":3432,"./el.js":3432,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":9155,"./es-do.js":9155,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":688,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":688,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":3333,"./ta.js":3333,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":8823,"./ug-cn.js":8823,"./uk":461,"./uk.js":461,"./ur":1366,"./ur.js":1366,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function r(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=5358},1490:function(e,t,s){"use strict";var a=s(5130),r=s(6768);const o={id:"app"},n={class:"container"};function i(e,t,s,a,i,l){const d=(0,r.g2)("AppNavbar"),c=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",o,["blank"!==e.$route.meta.layout?((0,r.uX)(),(0,r.Wv)(d,{key:0})):(0,r.Q3)("",!0),(0,r.Lk)("div",n,[(0,r.bF)(c)])])}const l={class:"navbar navbar-expand-lg"},d={class:"container-fluid"},c=(0,r.Lk)("a",{class:"navbar-brand text-white",href:"/home"},"MyTree",-1),u=(0,r.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r.Lk)("span",{class:"navbar-toggler-icon"})],-1),m={class:"collapse navbar-collapse",id:"navbarNav"},h={class:"navbar-nav ms-auto"},v=(0,r.Lk)("li",{class:"nav-item"},[(0,r.Lk)("a",{class:"nav-link active text-white",href:"/home",role:"button"},"Home")],-1),p={class:"nav-item dropdown"},g=(0,r.Lk)("a",{class:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Account ",-1),f={class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"};function b(e,t,s,o,n,i){const b=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",l,[(0,r.Lk)("div",d,[c,u,(0,r.Lk)("div",m,[(0,r.Lk)("ul",h,[v,(0,r.Lk)("li",p,[g,(0,r.Lk)("ul",f,[(0,r.Lk)("li",null,[e.isAuthenticated?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(b,{key:0,to:"/login-register",class:"dropdown-item"},{default:(0,r.k6)((()=>[(0,r.eW)("Login")])),_:1}))]),(0,r.Lk)("li",null,[e.isAdmin?((0,r.uX)(),(0,r.Wv)(b,{key:0,to:"/admin-dashboard",class:"dropdown-item"},{default:(0,r.k6)((()=>[(0,r.eW)("Dashboard")])),_:1})):(0,r.Q3)("",!0)]),(0,r.Lk)("li",null,[e.isAuthenticated?((0,r.uX)(),(0,r.Wv)(b,{key:0,to:"/",class:"dropdown-item",onClick:(0,a.D$)(i.logoutUser,["prevent"])},{default:(0,r.k6)((()=>[(0,r.eW)("Logout")])),_:1},8,["onClick"])):(0,r.Q3)("",!0)])])])])])])])}var k=s(782),j={computed:{...(0,k.L8)(["isAuthenticated","isAdmin"])},methods:{...(0,k.i0)(["logout"]),checkAuth(){console.log(this.isAuthenticated)},logoutUser(){console.log("Logging out..."),this.logout().then((()=>{console.log("Logged out. Current token:",this.$store.state.token),this.checkAuth()}))}},mounted(){this.checkAuth()},name:"AppNavbar"},_=s(1241);const y=(0,_.A)(j,[["render",b]]);var L=y,w={components:{AppNavbar:L}};const A=(0,_.A)(w,[["render",i]]);var U=A,C=s(1387),S=s(4232);const M=e=>((0,r.Qi)("data-v-7221e43b"),e=e(),(0,r.jt)(),e),E=M((()=>(0,r.Lk)("br",null,null,-1))),D=M((()=>(0,r.Lk)("br",null,null,-1))),P={class:"container"},x={class:"formBox"},$={class:"form"},X=M((()=>(0,r.Lk)("h3",null,"Add a Family Member",-1))),z=M((()=>(0,r.Lk)("option",{value:"M"},"M",-1))),F=M((()=>(0,r.Lk)("option",{value:"F"},"F",-1))),N=[z,F],R=["disabled"],B=(0,r.Fv)('<div class="treeContainer d_f" data-v-7221e43b><div class="_NewBranch d_f" data-v-7221e43b><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch hasChildren" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>0</p></div></div></div><div class="_NewBranch d_f" data-v-7221e43b><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch hasChildren" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>1</p></div></div></div><div class="_NewBranch d_f" data-v-7221e43b><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>2</p></div></div></div></div></div><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch hasChildren" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>3</p></div></div></div><div class="_NewBranch d_f" data-v-7221e43b><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>5</p></div></div></div></div></div></div></div></div></div></div></div><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch hasChildren" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>6</p></div></div></div><div class="_NewBranch d_f" data-v-7221e43b><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch hasChild" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>7</p></div></div></div><div class="_NewBranch d_f" data-v-7221e43b><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>8</p></div></div></div></div></div></div></div></div><div class="_treeRoot d_f" data-v-7221e43b><div class="_treeBranch" data-v-7221e43b><div class="_treeRaw d_f" data-v-7221e43b><div class="_treeLeaf d_f" data-v-7221e43b><div class="t_Data d_f" data-v-7221e43b><p class="shortName" data-v-7221e43b>9</p></div></div></div></div></div></div></div></div></div></div></div></div></div>',1),I=[B],q={class:"row"},O={class:"card mb-3"},T={class:"card-body"},Q={class:"card-title"};function Y(e,t,s,o,n,i){return(0,r.uX)(),(0,r.CE)(r.FK,null,[E,D,(0,r.Lk)("div",P,[(0,r.Lk)("div",x,[(0,r.Lk)("div",$,[(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>i.handleAddButton&&i.handleAddButton(...e)),["prevent"]))},[X,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.firstname=e),placeholder:"First Name",required:""},null,512),[[a.Jo,n.firstname]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.lastname=e),placeholder:"Last Name",required:""},null,512),[[a.Jo,n.lastname]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.birthdate=e),placeholder:"Birthday (dd/mm/yyyy)",required:""},null,512),[[a.Jo,n.birthdate]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.deathdate=e),placeholder:"Deathday (dd/mm/yyyy)"},null,512),[[a.Jo,n.deathdate]]),(0,r.bo)((0,r.Lk)("select",{id:"gender","onUpdate:modelValue":t[4]||(t[4]=e=>n.gender=e),name:"gender"},N,512),[[a.u1,n.gender]]),(0,r.Lk)("input",{type:"submit",value:"Add",disabled:n.loading},null,8,R)],32)])]),(0,r.Lk)("section",{ref:"treeMainContainer",class:"treeMainContainer",onMousedown:t[6]||(t[6]=(...e)=>i.handleMouseDown&&i.handleMouseDown(...e)),onMousemove:t[7]||(t[7]=(...e)=>i.handleMouseMove&&i.handleMouseMove(...e)),onMouseup:t[8]||(t[8]=(...e)=>i.handleMouseUp&&i.handleMouseUp(...e)),onMouseleave:t[9]||(t[9]=(...e)=>i.handleMouseUp&&i.handleMouseUp(...e))},I,544),(0,r.Lk)("div",q,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.listpersons,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"col-md-3",key:e.id},[(0,r.Lk)("div",O,[(0,r.Lk)("div",T,[(0,r.Lk)("h5",Q,(0,S.v_)(e.firstname)+" "+(0,S.v_)(e.lastname),1)])])])))),128))])])],64)}var J=s(8355),V=s(9148),W=s.n(V),H={name:"HomeView",data(){return{loading:!1,listpersons:[],firstname:"",lastname:"",birthdate:"",deathdate:"",gender:"M",isDragging:!1,startX:0,startY:0,scrollLeft:0,scrollTop:0}},methods:{...(0,k.i0)(["fetchPersons"]),handleAddButton(){return this.firstname&&this.lastname&&this.birthdate?W()(this.birthdate,"DD/MM/YYYY",!0).isValid()?this.deathdate&&!W()(this.deathdate,"DD/MM/YYYY",!0).isValid()?alert("Date of death is not valid"):(this.loading=!0,void J.A.post("http://localhost:3000/api/persons/create/",{firstname:this.firstname,lastname:this.lastname,gender:this.gender,birthdate:this.birthdate,deathdate:this.deathdate}).then((e=>{this.loading=!1,200===e.status&&this.fetchPersons()})).catch((e=>{console.error(e),this.loading=!1}))):alert("Date of birth is not valid"):alert("Fill out all of the input fields!")},handleMouseDown(e){this.isDragging=!0,this.startX=e.pageX-this.$refs.treeMainContainer.offsetLeft,this.startY=e.pageY-this.$refs.treeMainContainer.offsetTop,this.scrollLeft=this.$refs.treeMainContainer.scrollLeft,this.scrollTop=this.$refs.treeMainContainer.scrollTop},handleMouseMove(e){if(!this.isDragging)return;e.preventDefault();const t=e.pageX-this.$refs.treeMainContainer.offsetLeft,s=e.pageY-this.$refs.treeMainContainer.offsetTop,a=1.5*(t-this.startX),r=1.5*(s-this.startY);this.$refs.treeMainContainer.scrollLeft=this.scrollLeft-a,this.$refs.treeMainContainer.scrollTop=this.scrollTop-r},handleMouseUp(){this.isDragging=!1}},computed:{localPersons(){return this.$store.state.Persons?.persons}},async created(){await this.fetchPersons(),console.log(this.localPersons),this.listpersons=this.localPersons}};const K=(0,_.A)(H,[["render",Y],["__scopeId","data-v-7221e43b"]]);var G=K;const Z={class:"Profile"},ee=(0,r.Lk)("h1",null,"Profile",-1),te=[ee];function se(e,t,s,a,o,n){return(0,r.uX)(),(0,r.CE)("div",Z,te)}var ae={};const re=(0,_.A)(ae,[["render",se]]);var oe=re,ne=s.p+"img/logo.c8384af3.png";const ie=e=>((0,r.Qi)("data-v-834140ec"),e=e(),(0,r.jt)(),e),le=ie((()=>(0,r.Lk)("img",{src:ne,alt:"logo",class:"logo"},null,-1))),de={class:"box signin"},ce=ie((()=>(0,r.Lk)("h2",null,"Already Have An Account ?",-1))),ue={class:"box signup"},me=ie((()=>(0,r.Lk)("h2",null,"Don't Have An Account ?",-1))),he={class:"form signin"},ve=ie((()=>(0,r.Lk)("h3",null,"Sign In",-1))),pe=ie((()=>(0,r.Lk)("input",{type:"submit",value:"Login"},null,-1))),ge=ie((()=>(0,r.Lk)("a",{href:"#",class:"forgot"},"Forgot Password",-1))),fe={class:"form signup"},be=ie((()=>(0,r.Lk)("h3",null,"Sign Up",-1))),ke=ie((()=>(0,r.Lk)("input",{type:"submit",value:"Register"},null,-1))),je={key:0,class:"error"};function _e(e,t,s,o,n,i){const l=(0,r.g2)("Errors");return(0,r.uX)(),(0,r.CE)(r.FK,null,[le,(0,r.Lk)("div",{class:(0,S.C4)([{slide:n.isSlided},"container"])},[(0,r.Lk)("div",de,[ce,(0,r.Lk)("button",{class:"btn-signin",onClick:t[0]||(t[0]=e=>i.toggleSlide(!1))},"Sign In")]),(0,r.Lk)("div",ue,[me,(0,r.Lk)("button",{class:"btn-signup",onClick:t[1]||(t[1]=e=>i.toggleSlide(!0))},"Sign Up")]),(0,r.Lk)("div",{class:(0,S.C4)(["formBox",{slide:n.isSlided}])},[(0,r.Lk)("div",he,[(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.loginUser&&i.loginUser(...e)),["prevent"]))},[ve,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.loginForm.email=e),placeholder:"Email",required:""},null,512),[[a.Jo,n.loginForm.email]]),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>n.loginForm.password=e),placeholder:"Password",required:""},null,512),[[a.Jo,n.loginForm.password]]),pe,ge],32)]),(0,r.Lk)("div",fe,[(0,r.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>i.registerUser&&i.registerUser(...e)),["prevent"]))},[be,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.registerForm.email=e),placeholder:"Email",required:""},null,512),[[a.Jo,n.registerForm.email]]),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[6]||(t[6]=e=>n.registerForm.password=e),placeholder:"Password",required:""},null,512),[[a.Jo,n.registerForm.password]]),ke],32)])],2)],2),e.error?((0,r.uX)(),(0,r.CE)("div",je,[e.error?((0,r.uX)(),(0,r.Wv)(l,{key:0,msg:e.error},null,8,["msg"])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)],64)}s(4114);const ye={class:"alert alert-danger"};function Le(e,t,s,a,o,n){return(0,r.uX)(),(0,r.CE)("div",ye,(0,S.v_)(s.msg),1)}var we={props:["msg"]};const Ae=(0,_.A)(we,[["render",Le],["__scopeId","data-v-50c622d6"]]);var Ue=Ae,Ce={data(){return{isSlided:!1,loginForm:{email:"",password:""},registerForm:{email:"",password:""}}},components:{Errors:Ue},computed:{...(0,k.L8)(["error"])},methods:{...(0,k.i0)(["login","register"]),toggleSlide(e){this.isSlided=e},loginUser(){let e={email:this.loginForm.email,password:this.loginForm.password};this.login(e).then((e=>{e.data.success?this.$router.push("/"):console.log("Login failed:",e.msg||"Unknown error")})).catch((e=>{console.log("Login error:",e)}))},registerUser(){let e={email:this.registerForm.email,password:this.registerForm.password};this.register(e).then((e=>{e.data.success?(J.A.defaults.headers.common["Authorization"]=`Bearer ${localStorage.getItem("token")}`,this.$router.push("/home")):console.log("Registration failed:",e.msg||"Unknown error")})).catch((e=>{console.log("Registration error:",e)}))}}};const Se=(0,_.A)(Ce,[["render",_e],["__scopeId","data-v-834140ec"]]);var Me=Se;const Ee=(0,r.Lk)("br",null,null,-1),De={class:"container"},Pe=(0,r.Lk)("h1",null,"Admin Dashboard",-1),xe=(0,r.Lk)("br",null,null,-1),$e={class:"row"},Xe={class:"card mb-3"},ze={class:"card-body"},Fe={class:"card-title"},Ne={class:"card-subtitle mb-2 text-muted"},Re={class:"card-text"},Be={key:0,class:"btn btn-success text-white m-1",disabled:""},Ie=["onClick"],qe={key:2,class:"btn btn-primary m-1",disabled:""},Oe={key:3,class:"btn btn-danger m-1",disabled:""},Te={key:4,class:"btn btn-warning text-white m-1",disabled:""},Qe=["onClick"],Ye=["onClick"],Je=["onClick"],Ve=["onClick"];function We(e,t,s,a,o,n){return(0,r.uX)(),(0,r.CE)(r.FK,null,[Ee,(0,r.Lk)("div",De,[Pe,xe,(0,r.Lk)("div",$e,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.localUsers,(t=>((0,r.uX)(),(0,r.CE)("div",{class:"col-md-3",key:t._id},[(0,r.Lk)("div",Xe,[(0,r.Lk)("div",ze,[(0,r.Lk)("h5",Fe,(0,S.v_)(t.email),1),(0,r.Lk)("h6",Ne,"Role: "+(0,S.v_)(t.role),1),(0,r.Lk)("p",Re,"Created: "+(0,S.v_)(t.date),1),t.email==n.currentUserEmail?((0,r.uX)(),(0,r.CE)("button",Be,"This you")):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&t.email===n.megaAdmin?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"btn btn-primary m-1",onClick:s=>e.promoteUser(t.email)},"Promote",8,Ie)):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&"admin@admin.com"===t.email?((0,r.uX)(),(0,r.CE)("button",qe,"Super Admin")):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&"admin@admin.com"!==t.email&&"admin"===t.role?((0,r.uX)(),(0,r.CE)("button",Oe,"Admin")):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&"user"===t.role?((0,r.uX)(),(0,r.CE)("button",Te,"User")):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&"admin"!==t.role?((0,r.uX)(),(0,r.CE)("button",{key:5,class:"btn btn-danger m-1",onClick:s=>e.deleteUser(t.email),disa:""},"Delete",8,Qe)):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&n.megaAdmin&&"admin"===t.role?((0,r.uX)(),(0,r.CE)("button",{key:6,class:"btn btn-warning text-white m-1",onClick:s=>e.demoteUser(t.email)},"Demote",8,Ye)):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&"admin"!==t.role?((0,r.uX)(),(0,r.CE)("button",{key:7,class:"btn btn-primary m-1 text-white",onClick:s=>e.promoteUser(t.email)},"Promote",8,Je)):(0,r.Q3)("",!0),t.email!==n.currentUserEmail&&n.megaAdmin&&"admin"===t.role?((0,r.uX)(),(0,r.CE)("button",{key:8,class:"btn btn-danger text-white m-1",onClick:s=>e.deleteUser(t.email)},"Delete",8,Ve)):(0,r.Q3)("",!0)])])])))),128))])])],64)}var He={data(){return{localUsers:[]}},computed:{users(){return this.$store.state.Auth.users},currentUserEmail(){const e=JSON.parse(localStorage.getItem("user"));return e?e.email:""},megaAdmin(){const e=JSON.parse(localStorage.getItem("user"));return"admin@admin.com"===e.email}},methods:{...(0,k.i0)(["fetchUsers","promoteUser","deleteUser","demoteUser"])},async created(){await this.fetchUsers(),this.localUsers=this.users}};const Ke=(0,_.A)(He,[["render",We]]);var Ge=Ke;const Ze={token:localStorage.getItem("token")||"",status:"",user:{},role:localStorage.getItem("role")||"",error:null,users:[]},et={isAuthenticated:e=>!!e.token,isAdmin:e=>"admin"===e.role,authState:e=>e.status,user:e=>e.user,role:e=>e.role,error:e=>e.error,users:e=>e.users},tt={async login({commit:e},t){e("auth_request");try{let s=await J.A.post("http://localhost:3000/api/users/login",t);if(s.data.success){const t=s.data.token,a=s.data.user,r=a.role;localStorage.setItem("token",t),J.A.defaults.headers.common["Authorization"]=`Bearer ${t}`,localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("role",r),e("setToken",t),e("setUser",a),e("setRole",r),e("auth_success",t,a,r)}return s}catch(s){e("auth_error",s)}},async register({commit:e},t){e("register_request");try{let s=await J.A.post("http://localhost:3000/api/users/register",t);return void 0!==s.data.success&&(e("register_success"),localStorage.setItem("token",s.data.token),J.A.defaults.headers.common["Authorization"]=`Bearer ${s.data.token}`,localStorage.setItem("user",JSON.stringify(s.data.user)),localStorage.setItem("role",s.data.user.role),e("setToken",s.data.token),e("setUser",s.data.user),e("setRole",s.data.user.role),localStorage.setItem("token",s.data.token),e("setToken",s.data.token)),s}catch(s){e("register_error",s)}},async logout({commit:e}){await localStorage.removeItem("token"),await localStorage.removeItem("user"),await localStorage.removeItem("role"),e("logout"),delete J.A.defaults.headers.common["Authorization"],mt.push("/login-register")},async promoteUser({commit:e},t){try{await J.A.put(`http://localhost:3000/api/users/promote/${t}`),e("promoteUser",t)}catch(s){console.log(s)}},async deleteUser({commit:e},t){try{await J.A.delete(`http://localhost:3000/api/users/delete/${t}`),e("deleteUser",t)}catch(s){console.log(s)}},async fetchUsers({commit:e}){try{const t=await J.A.get("http://localhost:3000/api/users/list");e("setUsers",t.data)}catch(t){console.log("Error fetching users:",t)}},async demoteUser({commit:e},t){try{await J.A.put(`http://localhost:3000/api/users/demote/${t}`),e("demoteUser",t)}catch(s){console.log(s)}}},st={auth_request(e){e.status="loading",e.error=null},auth_success(e,t,s,a){e.token=t,e.user=s,e.role=a,e.status="success",e.error=null},auth_error(e,t){e.error=t.response?t.response.data.msg:t.message,e.status="error"},register_request(e){e.status="loading",e.error=null},register_success(e){e.status="success",e.error=null},register_error(e,t){e.error=t.response.data.msg,e.status="error"},logout(e){e.status="",e.token="",e.user="",e.error=null},setToken(e,t){e.token=t},setUser(e,t){e.user=t},setRole(e,t){e.role=t},promoteUser(e,t){const s=e.user.find((e=>e.email===t));s.role="admin"},deleteUser(e,t){e.users=e.users.filter((e=>e.email!==t))},setUsers(e,t){e.users=t},demoteUser(e,t){const s=e.user.find((e=>e.email===t));s.role="user"}};var at={state:Ze,actions:tt,mutations:st,getters:et};const rt={persons:[],children:[],parents:[],spouse:null,person:null},ot={persons:e=>e.persons,children:e=>e.children,parents:e=>e.parents,spouse:e=>e.spouse,person:e=>e.person},nt={async fetchPersons({commit:e}){try{let t=await J.A.get("http://localhost:3000/api/persons/list");return console.log(t),e("setPersons",t.data.persons),t}catch(t){console.log(t)}},async createPerson({commit:e},t){try{await J.A.post("http://localhost:3000/api/persons/create",t),e("addPerson",t),mt.push("/home")}catch(s){console.log(s)}},async updatePerson({commit:e},t){try{await J.A.put(`http://localhost:3000/api/persons/update/${t.id}`,t),e("updatePerson",t),mt.push("/home")}catch(s){console.log(s)}},async deletePerson({commit:e},t){try{await J.A.delete(`http://localhost:3000/api/persons/delete/${t}`),e("deletePerson",t),mt.push("/home")}catch(s){console.log(s)}},async fetchChildren({commit:e},t){try{let s=await J.A.get(`http://localhost:3000/api/persons/children/${t}`);return e("getChildren",s.data.children),s}catch(s){console.log(s)}},async fetchParents({commit:e},t){try{let s=await J.A.get(`http://localhost:3000/api/persons/parents/${t}`);return e("getParents",s.data.parents),s}catch(s){console.log(s)}},async fetchSpouse({commit:e},t){try{let s=await J.A.get(`http://localhost:3000/api/persons/spouse/${t}`);return e("getSpouse",s.data.spouse),s}catch(s){console.log(s)}},async fetchPerson({commit:e},t){try{let s=await J.A.get(`http://localhost:3000/api/persons/${t}`);return e("getPerson",s.data.person),s}catch(s){console.log(s)}}},it={getPersons(e,t){e.persons=t},addPerson(e,t){e.persons.push(t)},updatePerson(e,t){let s=e.persons.findIndex((e=>e.id===t.id));e.persons.splice(s,1,t)},deletePerson(e,t){let s=e.persons.findIndex((e=>e.id===t));e.persons.splice(s,1)},getChildren(e,t){e.children=t},getParents(e,t){e.parents=t},getSpouse(e,t){e.spouse=t},setPersons(e,t){e.person=t}};var lt={state:rt,actions:nt,mutations:it,getters:ot},dt=(0,k.y$)({modules:{Auth:at,Tree:lt},state:{},getters:{},mutations:{},actions:{}});const ct=[{path:"/home",name:"Home",component:G,meta:{requiresAuth:!0,layout:"default"}},{path:"/profile",name:"profile",component:oe,meta:{requiresAuth:!0,layout:"default"}},{path:"/login-register",name:"LoginRegister",component:Me,meta:{requiresGuest:!0,layout:"blank"}},{path:"/admin-dashboard",name:"AdminDashboard",component:Ge,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/:catchAll(.*)",redirect:"/home"}],ut=(0,C.aE)({history:(0,C.LA)("/"),routes:ct});ut.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requiresAuth))?dt.getters.isAuthenticated?e.matched.some((e=>e.meta.requiresAdmin))&&!dt.getters.isAdmin?s("/home"):s():s("/login-register"):e.matched.some((e=>e.meta.requiresGuest))&&dt.getters.isAuthenticated?s("/home"):s()}));var mt=ut;const ht=(0,a.Ef)(U);ht.config.globalProperties.$http=J.A;const vt=localStorage.getItem("token");vt&&(J.A.defaults.headers.common["Authorization"]=`Bearer ${vt}`),ht.config.productionTip=!1,ht.use(dt).use(mt).mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,o){if(!a){var n=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],o=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,n=a[0],i=a[1],l=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var c=l(s)}for(t&&t(a);d<n.length;d++)o=n[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(1490)}));a=s.O(a)})();
//# sourceMappingURL=app.407d6d11.js.map